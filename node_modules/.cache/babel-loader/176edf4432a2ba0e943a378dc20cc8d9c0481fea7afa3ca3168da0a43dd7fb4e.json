{"ast":null,"code":"import _slicedToArray from\"/home/hyphen/MERN-ecommerce-Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{loadStripe}from\"@stripe/stripe-js\";import{Elements}from\"@stripe/react-stripe-js\";import{useSelector}from'react-redux';import CheckoutForm from\"./CheckoutForm\";import\"../Stripe.css\";import{selectCurrentOrder}from\"../features/order/orderSlice\";// Make sure to call loadStripe outside of a component’s render to avoid\n// recreating the Stripe object on every render.\n// This is your test publishable API key.\nimport{jsx as _jsx}from\"react/jsx-runtime\";var stripePromise=loadStripe(\"pk_test_51N5NLVSF2Mo4AGVvYGMMNnTcPA5lHrkUv8zPymsKfL31c8m6et8525Y92zMgA22m1u6ZkkXsBofre0PJL6i3eVsh00sR6M8c00\");export default function StripeCheckout(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),clientSecret=_useState2[0],setClientSecret=_useState2[1];var currentOrder=useSelector(selectCurrentOrder);useEffect(function(){// Create PaymentIntent as soon as the page loads\nfetch(\"/create-payment-intent\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({totalAmount:currentOrder.totalAmount,orderId:currentOrder.id})}).then(function(res){return res.json();}).then(function(data){return setClientSecret(data.clientSecret);});},[]);var appearance={theme:'stripe'};var options={clientSecret:clientSecret,appearance:appearance};return/*#__PURE__*/_jsx(\"div\",{className:\"Stripe\",children:clientSecret&&/*#__PURE__*/_jsx(Elements,{options:options,stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{})})});}","map":{"version":3,"names":["React","useState","useEffect","loadStripe","Elements","useSelector","CheckoutForm","selectCurrentOrder","jsx","_jsx","stripePromise","StripeCheckout","_useState","_useState2","_slicedToArray","clientSecret","setClientSecret","currentOrder","fetch","method","headers","body","JSON","stringify","totalAmount","orderId","id","then","res","json","data","appearance","theme","options","className","children","stripe"],"sources":["/home/hyphen/MERN-ecommerce-Frontend/src/pages/StripeCheckout.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { useSelector } from 'react-redux';\n\nimport CheckoutForm from \"./CheckoutForm\";\nimport \"../Stripe.css\";\nimport { selectCurrentOrder } from \"../features/order/orderSlice\";\n\n// Make sure to call loadStripe outside of a component’s render to avoid\n// recreating the Stripe object on every render.\n// This is your test publishable API key.\nconst stripePromise = loadStripe(\"pk_test_51N5NLVSF2Mo4AGVvYGMMNnTcPA5lHrkUv8zPymsKfL31c8m6et8525Y92zMgA22m1u6ZkkXsBofre0PJL6i3eVsh00sR6M8c00\");\n\nexport default function StripeCheckout() {\n  const [clientSecret, setClientSecret] = useState(\"\");\n  const currentOrder = useSelector(selectCurrentOrder)\n\n  useEffect(() => {\n    // Create PaymentIntent as soon as the page loads\n    fetch(\"/create-payment-intent\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ totalAmount: currentOrder.totalAmount, orderId:currentOrder.id }),\n    \n    })\n      .then((res) => res.json())\n      .then((data) => setClientSecret(data.clientSecret));\n  }, []);\n\n  const appearance = {\n    theme: 'stripe',\n  };\n  const options = {\n    clientSecret,\n    appearance,\n  };\n\n  return (\n    <div className=\"Stripe\">\n      {clientSecret && (\n        <Elements options={options} stripe={stripePromise}>\n          <CheckoutForm />\n        </Elements>\n      )}\n    </div>\n  );\n}"],"mappings":"0HAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,mBAAmB,CAC9C,OAASC,QAAQ,KAAQ,yBAAyB,CAClD,OAASC,WAAW,KAAQ,aAAa,CAEzC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,eAAe,CACtB,OAASC,kBAAkB,KAAQ,8BAA8B,CAEjE;AACA;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,GAAM,CAAAC,aAAa,CAAGP,UAAU,CAAC,6GAA6G,CAAC,CAE/I,cAAe,SAAS,CAAAQ,cAAcA,CAAA,CAAG,CACvC,IAAAC,SAAA,CAAwCX,QAAQ,CAAC,EAAE,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IACpC,GAAM,CAAAI,YAAY,CAAGZ,WAAW,CAACE,kBAAkB,CAAC,CAEpDL,SAAS,CAAC,UAAM,CACd;AACAgB,KAAK,CAAC,wBAAwB,CAAE,CAC9BC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,WAAW,CAAEP,YAAY,CAACO,WAAW,CAAEC,OAAO,CAACR,YAAY,CAACS,EAAG,CAAC,CAEzF,CAAC,CAAC,CACCC,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,QAAK,CAAAd,eAAe,CAACc,IAAI,CAACf,YAAY,CAAC,GAAC,CACvD,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAgB,UAAU,CAAG,CACjBC,KAAK,CAAE,QACT,CAAC,CACD,GAAM,CAAAC,OAAO,CAAG,CACdlB,YAAY,CAAZA,YAAY,CACZgB,UAAU,CAAVA,UACF,CAAC,CAED,mBACEtB,IAAA,QAAKyB,SAAS,CAAC,QAAQ,CAAAC,QAAA,CACpBpB,YAAY,eACXN,IAAA,CAACL,QAAQ,EAAC6B,OAAO,CAAEA,OAAQ,CAACG,MAAM,CAAE1B,aAAc,CAAAyB,QAAA,cAChD1B,IAAA,CAACH,YAAY,GAAE,CAAC,CACR,CACX,CACE,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}