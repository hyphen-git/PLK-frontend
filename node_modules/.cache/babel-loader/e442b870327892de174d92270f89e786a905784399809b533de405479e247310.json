{"ast":null,"code":"import _objectSpread from\"/home/hyphen/MERN-ecommerce-Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Link}from'react-router-dom';import{useForm}from'react-hook-form';import{useDispatch,useSelector}from'react-redux';import{resetPasswordAsync,selectError,selectPasswordReset}from'../authSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ResetPassword(){var passwordReset=useSelector(selectPasswordReset);var error=useSelector(selectError);var query=new URLSearchParams(window.location.search);var token=query.get('token');var email=query.get('email');var dispatch=useDispatch();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;console.log(errors);console.log(email,token);return/*#__PURE__*/_jsx(_Fragment,{children:email&&token?/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-sm\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto h-10 w-auto\",src:\"/ecommerce.png\",alt:\"Your Company\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900\",children:\"Enter New Password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\",children:[/*#__PURE__*/_jsxs(\"form\",{noValidate:true,onSubmit:handleSubmit(function(data){console.log(data);dispatch(resetPasswordAsync({email:email,token:token,password:data.password}));}),className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium leading-6 text-gray-900\",children:\"New Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({id:\"password\"},register('password',{required:'password is required',pattern:{value:/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm,message:\"- at least 8 characters\\n\\n                      - must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number\\n\\n                      - Can contain special characters\"}})),{},{type:\"password\",className:\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"})),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:errors.password.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium leading-6 text-gray-900\",children:\"Confirm Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({id:\"confirmPassword\"},register('confirmPassword',{required:'confirm password is required',validate:function validate(value,formValues){return value===formValues.password||'password not matching';}})),{},{type:\"password\",className:\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"})),errors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:errors.confirmPassword.message}),passwordReset&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500\",children:\"Password Reset\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\",children:\"Reset Password\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-10 text-center text-sm text-gray-500\",children:[\"Send me back to\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"font-semibold leading-6 text-indigo-600 hover:text-indigo-500\",children:\"Login\"})]})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Incorrect Link\"})});}","map":{"version":3,"names":["Link","useForm","useDispatch","useSelector","resetPasswordAsync","selectError","selectPasswordReset","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPassword","passwordReset","error","query","URLSearchParams","window","location","search","token","get","email","dispatch","_useForm","register","handleSubmit","errors","formState","console","log","children","className","src","alt","noValidate","onSubmit","data","password","htmlFor","_objectSpread","id","required","pattern","value","message","type","validate","formValues","confirmPassword","to"],"sources":["/home/hyphen/MERN-ecommerce-Frontend/src/features/auth/components/ResetPassword.js"],"sourcesContent":["import { Link } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport {useDispatch, useSelector} from 'react-redux';\nimport { resetPasswordAsync, selectError, selectPasswordReset } from '../authSlice';\n\nexport default function ResetPassword() {\n\n  const passwordReset = useSelector(selectPasswordReset);\n  const error = useSelector(selectError)\n  const query = new URLSearchParams(window.location.search);\n  const token = query.get('token')\n  const email = query.get('email')\n\n  const dispatch = useDispatch()\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  console.log(errors);\n  console.log(email, token)\n\n  return (\n    <>\n      {(email && token) ? <div className=\"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8\">\n        <div className=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n          <img\n            className=\"mx-auto h-10 w-auto\"\n            src=\"/ecommerce.png\"\n            alt=\"Your Company\"\n          />\n          <h2 className=\"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900\">\n            Enter New Password\n          </h2>\n        </div>\n\n        <div className=\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\n          <form\n            noValidate\n            onSubmit={handleSubmit((data) => {\n              console.log(data);\n              dispatch(resetPasswordAsync({email, token, password:data.password}))\n              \n            })}\n            className=\"space-y-6\"\n          >\n            <div>\n              <div className=\"flex items-center justify-between\">\n                <label\n                  htmlFor=\"password\"\n                  className=\"block text-sm font-medium leading-6 text-gray-900\"\n                >\n                  New Password\n                </label>\n              </div>\n              <div className=\"mt-2\">\n                <input\n                  id=\"password\"\n                  {...register('password', {\n                    required: 'password is required',\n                    pattern: {\n                      value:\n                        /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm,\n                      message: `- at least 8 characters\\n\n                      - must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number\\n\n                      - Can contain special characters`,\n                    },\n                  })}\n                  type=\"password\"\n                  className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                />\n                {errors.password && (\n                  <p className=\"text-red-500\">{errors.password.message}</p>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <div className=\"flex items-center justify-between\">\n                <label\n                  htmlFor=\"password\"\n                  className=\"block text-sm font-medium leading-6 text-gray-900\"\n                >\n                  Confirm Password\n                </label>\n              </div>\n              <div className=\"mt-2\">\n                <input\n                  id=\"confirmPassword\"\n                  {...register('confirmPassword', {\n                    required: 'confirm password is required',\n                    validate: (value, formValues) =>\n                      value === formValues.password || 'password not matching',\n                  })}\n                  type=\"password\"\n                  className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                />\n                {errors.confirmPassword && (\n                  <p className=\"text-red-500\">\n                    {errors.confirmPassword.message}\n                  </p>\n                )}\n                {passwordReset && (\n                  <p className=\"text-green-500\">Password Reset</p>\n                )}\n                {error && (\n                  <p className=\"text-red-500\">{error}</p>\n                )}\n              </div>\n            </div>\n            <div>\n              <button\n                type=\"submit\"\n                className=\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n              >\n                Reset Password\n              </button>\n            </div>\n          </form>\n\n          <p className=\"mt-10 text-center text-sm text-gray-500\">\n            Send me back to{' '}\n            <Link\n              to=\"/login\"\n              className=\"font-semibold leading-6 text-indigo-600 hover:text-indigo-500\"\n            >\n              Login\n            </Link>\n          </p>\n        </div>\n      </div>: <p>Incorrect Link</p>}\n\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}